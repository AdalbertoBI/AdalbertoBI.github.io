:root{
  --bg:#111b21;
  --fg:#e9edef;
  --muted:#8696a0;
  --card:#202c33;
  --accent:#00a884;
  --accent-2:#008069;
  --danger:#ef4444;
  --warning:#f59e0b;
  --success:#00a884;
  --whatsapp-green:#00a884;
  --whatsapp-dark:#111b21;
  --whatsapp-darker:#0b141a;
  --whatsapp-light:#202c33;
  --whatsapp-input:#2a3942;
  --whatsapp-border:#3b4a54;
  --message-bg-me:#005c4b;
  --message-bg-other:#202c33;
}

*{box-sizing:border-box}

/* === SCROLLBARS CUSTOMIZADAS === */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

html,body{height:100%;margin:0;padding:0}
body{
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
  background:var(--whatsapp-dark);
  color:var(--fg);
  overflow:hidden;
}

/* === LOGIN SCREEN === */
.login-container{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:radial-gradient(1200px 800px at 80% -10%,#1e293b00 60%,#1e293bff 100%),var(--bg);
}

.login-card{
  background:linear-gradient(180deg,#0b1220 0%,#0e1526 100%);
  border:1px solid #1f2a44;
  border-radius:16px;
  padding:32px 24px;
  box-shadow:0 10px 40px rgba(0,0,0,.35);
  width:100%;
  max-width:420px;
}

.login-card h1{
  margin:0 0 8px;
  font-size:2rem;
  font-weight:600;
  text-align:center;
}

.login-subtitle{
  color:var(--muted);
  margin:0 0 24px;
  text-align:center;
  font-size:0.95rem;
}

form{
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-bottom:16px;
}

label{
  font-size:.9rem;
  color:#c7d2fe;
  font-weight:500;
}

input{
  padding:12px 14px;
  border:1px solid #20304d;
  background:#0a1220;
  color:var(--fg);
  border-radius:10px;
  outline:none;
  font-size:0.95rem;
}

input:focus{
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(59,130,246,.1);
}

button{
  cursor:pointer;
  border:none;
  border-radius:10px;
  padding:12px 16px;
  background:linear-gradient(180deg,var(--accent),var(--accent-2));
  color:#fff;
  font-weight:600;
  font-size:0.95rem;
  transition:transform 0.1s ease;
}

button:hover{
  transform:translateY(-1px);
}

button:active{
  transform:translateY(0);
}

button:disabled{
  opacity:.7;
  cursor:not-allowed;
  transform:none;
}

.status{
  min-height:22px;
  margin-top:12px;
  font-size:.95rem;
}

.status.error{color:var(--danger)}
.status.success{color:var(--success)}
.status.warning{
  color:var(--warning);
  background:rgba(245,158,11,.1);
  padding:12px;
  border-radius:8px;
  border-left:4px solid var(--warning);
}

.help{
  margin-top:16px;
  color:var(--muted);
  font-size:0.9rem;
}

.help summary{
  cursor:pointer;
  font-weight:500;
  margin-bottom:8px;
}

.help ul{
  margin:8px 0 0 0;
  padding-left:20px;
}

.help li{
  margin-bottom:4px;
}

code{
  background:#0a1220;
  border:1px solid #20304d;
  padding:2px 6px;
  border-radius:6px;
  font-size:0.85rem;
}

/* === WHATSAPP INTERFACE === */
.whatsapp-container{
  height:100vh;
  display:flex;
  flex-direction:column;
  background:var(--whatsapp-dark);
}

.whatsapp-header{
  background:var(--whatsapp-light);
  border-bottom:1px solid var(--whatsapp-border);
  padding:12px 20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  min-height:60px;
}

.header-left{
  display:flex;
  align-items:center;
  gap:16px;
}

.header-left h1{
  margin:0;
  font-size:1.4rem;
  font-weight:600;
  color:var(--whatsapp-green);
}

.connection-status{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:0.85rem;
  color:var(--muted);
}

.status-dot{
  width:8px;
  height:8px;
  border-radius:50%;
  background:var(--danger);
  animation:pulse 2s infinite;
}

.status-dot.connected{background:var(--success)}
.status-dot.connecting{background:var(--warning)}

@keyframes pulse{
  0%{opacity:1}
  50%{opacity:0.5}
  100%{opacity:1}
}

.header-right{
  display:flex;
  align-items:center;
  gap:12px;
}

.username{
  font-weight:500;
  color:var(--fg);
}

.btn-icon{
  background:none;
  border:none;
  font-size:1.2rem;
  padding:8px;
  border-radius:50%;
  cursor:pointer;
  color:var(--muted);
  transition:background 0.2s ease;
}

.btn-icon:hover{
  background:rgba(255,255,255,0.1);
}

/* === QR CODE SCREEN === */
.qr-screen{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:40px 20px;
}

.qr-container{
  text-align:center;
  max-width:400px;
}

.qr-container h2{
  margin:0 0 12px;
  font-size:1.8rem;
  font-weight:600;
}

.qr-container p{
  margin:0 0 24px;
  color:var(--muted);
  font-size:1.1rem;
}

.qr-code{
  background:white;
  padding:20px;
  border-radius:16px;
  display:inline-block;
  margin:0 0 24px;
  box-shadow:0 8px 32px rgba(0,0,0,0.3);
}

.qr-code img{
  display:block;
  max-width:100%;
}

.qr-instructions{
  text-align:left;
  background:var(--whatsapp-light);
  padding:20px;
  border-radius:12px;
  border-left:4px solid var(--whatsapp-green);
}

.qr-instructions ol{
  margin:0;
  padding-left:20px;
}

.qr-instructions li{
  margin:8px 0;
  font-size:0.95rem;
}

/* === MAIN INTERFACE === */
.main-interface{
  flex:1;
  display:flex;
  overflow:hidden;
}

/* Sidebar */
.sidebar{
  width:340px;
  background:var(--whatsapp-darker);
  border-right:1px solid var(--whatsapp-border);
  display:flex;
  flex-direction:column;
}

.sidebar-header{
  padding:16px 20px;
  border-bottom:1px solid var(--whatsapp-border);
}

.sidebar-header h3{
  margin:0 0 12px;
  font-size:1.3rem;
  font-weight:600;
}

.search-box input{
  width:100%;
  background:var(--whatsapp-input);
  border:none;
  padding:10px 14px;
  border-radius:8px;
  color:var(--fg);
  font-size:0.9rem;
}

.search-box input::placeholder{
  color:var(--muted);
}

.chats-list{
  flex:1;
  overflow-y:auto;
}

.loading-chats{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:40px 20px;
  color:var(--muted);
  gap:12px;
}

.chat-item{
  padding:12px 20px;
  border-bottom:1px solid rgba(255,255,255,0.05);
  cursor:pointer;
  transition:background 0.2s ease;
  display:flex;
  align-items:center;
  gap:12px;
}

.chat-item:hover{
  background:rgba(255,255,255,0.05);
}

.chat-item.active{
  background:var(--whatsapp-light);
}

.chat-avatar{
  width:48px;
  height:48px;
  border-radius:50%;
  background:var(--whatsapp-green);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1.4rem;
  font-weight:600;
  color:white;
  flex-shrink:0;
}

.chat-info{
  flex:1;
  min-width:0;
}

.chat-name{
  font-weight:500;
  margin:0 0 2px;
  font-size:1rem;
}

.chat-last-message{
  color:var(--muted);
  font-size:0.85rem;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.chat-meta{
  text-align:right;
  flex-shrink:0;
}

.chat-time{
  font-size:0.75rem;
  color:var(--muted);
  margin-bottom:4px;
}

.chat-unread{
  background:var(--whatsapp-green);
  color:white;
  font-size:0.75rem;
  font-weight:600;
  padding:2px 6px;
  border-radius:10px;
  min-width:18px;
  text-align:center;
}

/* Chat Area */
.chat-area{
  flex:1;
  display:flex;
  flex-direction:column;
  background:var(--whatsapp-dark);
}

.welcome-screen{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:40px;
}

.welcome-content{
  text-align:center;
  max-width:400px;
}

.welcome-content h2{
  margin:0 0 12px;
  font-size:2rem;
  font-weight:600;
  color:var(--whatsapp-green);
}

.welcome-content p{
  margin:0 0 24px;
  color:var(--muted);
  font-size:1.1rem;
}

.feature-list{
  display:flex;
  flex-direction:column;
  gap:8px;
  text-align:left;
}

.feature{
  background:var(--whatsapp-light);
  padding:12px 16px;
  border-radius:8px;
  font-size:0.9rem;
}

/* Chat Container */
.chat-container{
  flex:1;
  display:flex;
  flex-direction:column;
  height:100%; /* Força altura total */
  min-height:0; /* Permite que flex funcione */
}

.chat-header{
  background:var(--whatsapp-light);
  border-bottom:1px solid var(--whatsapp-border);
  padding:12px 20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  min-height:64px;
  flex-shrink:0; /* Não comprime o header */
}

.contact-info{
  display:flex;
  align-items:center;
  gap:12px;
}

.contact-avatar{
  width:40px;
  height:40px;
  border-radius:50%;
  background:var(--whatsapp-green);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1.2rem;
  color:white;
  font-weight:600;
}

.contact-details h4{
  margin:0 0 2px;
  font-size:1.1rem;
  font-weight:600;
}

.contact-status{
  font-size:0.8rem;
  color:var(--muted);
}

.chat-actions{
  display:flex;
  gap:4px;
}

/* Messages Area */
.messages-area{
  flex:1;
  overflow-y:auto;
  padding:20px;
  background-image:linear-gradient(rgba(11,18,32,0.6), rgba(11,18,32,0.6)), url("data:image/svg+xml,%3csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cpattern id='a' patternUnits='userSpaceOnUse' width='20' height='20' patternTransform='scale(0.5) rotate(0)'%3e%3crect x='0' y='0' width='100%25' height='100%25' fill='%23000'/%3e%3cpath d='M3.25 10h13.5M10 3.25v13.5' stroke='%23ffffff' stroke-width='0.1' stroke-linecap='square' opacity='0.02'/%3e%3c/pattern%3e%3c/defs%3e%3crect width='100%25' height='100%25' fill='url(%23a)'/%3e%3c/svg%3e");
  display:flex;
  flex-direction:column;
  gap:8px;
  min-height:0; /* Permite que flex funcione corretamente */
  scroll-behavior:smooth;
}

.loading-messages{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  flex:1;
  color:var(--muted);
  gap:12px;
}

.message{
  max-width:70%;
  padding:8px 12px;
  border-radius:8px;
  position:relative;
  word-wrap:break-word;
}

.message.from-me{
  background:var(--message-bg-me);
  align-self:flex-end;
  color:white;
}

.message.from-other{
  background:var(--message-bg-other);
  align-self:flex-start;
}

.message-body{
  margin:0 0 4px;
  line-height:1.4;
}

.message-meta{
  font-size:0.75rem;
  opacity:0.7;
  display:flex;
  justify-content:flex-end;
  align-items:center;
  gap:4px;
}

.message-time{
  color:inherit;
}

.message-status{
  font-size:0.8rem;
}

/* Message Input */
.message-input-area{
  background:var(--whatsapp-light);
  border-top:1px solid var(--whatsapp-border);
  padding:12px 20px;
  flex-shrink:0; /* Não permite compressão */
}

.message-input-container{
  display:flex;
  align-items:center;
  gap:12px;
  background:var(--whatsapp-input);
  border-radius:24px;
  padding:8px 16px;
  min-height:44px; /* Altura mínima adequada */
}

.message-input-container input{
  flex:1;
  background:none;
  border:none;
  color:var(--fg);
  font-size:0.95rem;
  padding:8px 0;
  outline:none;
}

.message-input-container input::placeholder{
  color:var(--muted);
}

.btn-send{
  background:var(--whatsapp-green);
  border:none;
  width:36px;
  height:36px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  font-size:1rem;
  color:white;
  transition:background 0.2s ease;
}

.btn-send:hover{
  background:#00916a;
}

/* Spinner */
.spinner{
  width:24px;
  height:24px;
  border:2px solid transparent;
  border-top:2px solid var(--whatsapp-green);
  border-radius:50%;
  animation:spin 1s linear infinite;
}

@keyframes spin{
  to{transform:rotate(360deg)}
}

/* Configuration Alert */
.config-alert {
  margin-top: 20px;
  padding: 20px;
  background: linear-gradient(135deg, #ff6b6b, #ee5a52);
  border-radius: 12px;
  text-align: center;
  animation: pulse 2s infinite;
}

.config-alert.hidden {
  display: none;
}

.alert-content h3 {
  margin: 0 0 10px;
  color: white;
  font-size: 1.2rem;
}

.alert-content p {
  margin: 0 0 15px;
  color: rgba(255, 255, 255, 0.9);
  font-size: 0.95rem;
}

.config-btn {
  display: inline-block;
  background: white;
  color: #ff6b6b;
  padding: 12px 24px;
  border-radius: 25px;
  text-decoration: none;
  font-weight: 600;
  transition: all 0.3s ease;
}

.config-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.8; }
}

/* Utility Classes */
.hidden{display:none !important}

/* Responsive */
@media (max-width: 768px) {
  .main-interface{
    flex-direction:column;
  }
  
  .sidebar{
    width:100%;
    height:40%;
    border-right:none;
    border-bottom:1px solid var(--whatsapp-border);
  }
  
  .chat-area{
    height:60%;
  }
}